# springboot_web
综述，基于springboot搭建一个简单的注册，登录，查看个人注册信息的web项目，走一遍java开发的流程

# 0、环境准备
jdk1.8, maven3, idea intelliJ, 

redis,mysql,nginx,tomcat

# 1、项目基本要求
前端页面：

1）注册页面：内含以下几个html组件：

注册邮箱（判断是否已注册，数据库内不能重复）
密码（密码要求，8位以上，16位以下，只能是字母数字组合，用正则表达式来实现该判断逻辑）
密码确认
昵称（判断是否已注册，数据库内不能重复；昵称如果填写的是中文，检查数据库里，以及未来在用户信息页中展示用户昵称时，能正确显示中文，没有出现乱码现象。如果出现乱码，尝试解决该问题。）
头像图片上传（可以上传1MB以下的图片文件作为头像，上传后显示100px*100px小图）
提交按钮（不符合要求的话，需要显示报错信息，了解并熟悉JSR303规范，用这个来实现格式校验）成功后，显示成功，并跳转到登录页面
取消重置按钮。
其他要求：
密码通过前端RSA加密后，传输到后端api
后端api通过RSA解密后获得密码的原文，但加salt后md5存到数据库中。
2）登录页面：内含以下html组件：

账号邮箱
密码（密码通过前端RSA非对称加密后，和其他表单字段一起post提交到后端api）
提交按钮
取消按钮
其他要求：
校验账号密码是否和数据库中的一致，不一致报错
如果一致的话，跳转到用户信息页，同时种一个cookie，key值为uidtoken，域名*.bitmain.com，有效期30分钟，value是uid+该cookie创建时间戳的字符串的AES加密串。比如该用户uid是101，当前时间戳1625483385，该cookie值为aes_encode("1011625483385", "密钥")
将该用户uid当前是否登录的登录态保存到redis里

3）用户信息页：该页显示用户信息，包含邮箱，昵称，头像 100px*100px小图。本页面需要被登录保护，未登录状态无法访问，并跳转到登录页。用springboot的filter等机制，保护本页面。通过读取cookie的uidtoken，aes解密后，判断用户登录态是否合法，以及还在有效时间内，如果uidtoken无效（比如aes解密失败），则跳转到登录页面。如果有效期30分钟已过，则从redis里读取用户状态，如果还有效，则重新生成新的有效的uidtoken，写到cookie里。本页还有一个logout链接，点击后，清除用户的cookie，以及redis登录状态。跳转到登录页。



# 其他要求：

1）数据库层，选择合适的索引，并会用explain等判断自己的查询语句是否使用了合适的索引。

2）理解日志级别和日志的配置，整个项目能输出合理的日志，并试一试什么时候能输出mysql的log，什么时候可以禁掉繁琐的mysql日志。

# 2、测试要求
1）熟悉了解单元测试，集成测试的概念，以及测试覆盖率的概念，对每个后端的public方法进行单元测试，对api接口做集成测试；

2）熟悉压测的概念，和tps，qps等概念，选择合适的压测工具，对后端api做压测，了解接口性能。

3）如有可能，找出问题所在，并进一步调优性能问题。

# 3、开发流程要求
1）在gitlab自己个人的私有项目中，新建本项目

2）设立master和dev分支，平常在dev分支中开发，上线前合并到master

3）了解pull request

4）学有余力，在gitlab上配置pipeline，使得项目可以在每次commit后，自动发版。

# 4、部署要求
1、本应用，启2个实例，一个是8080端口，一个是8081端口，通过nginx配置负载均衡到这2个进程上。配好后，检查springboot进程解析http请求时，依然能正常解析到cookie里的uidtoken等
